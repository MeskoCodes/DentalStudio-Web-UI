@using MudBlazor
@inherits AppointmentFormViewModel

@if (AppointmentCreate != null && AppointmentCreate.Id == 0)
{
    <MudDialog Style="width:inherit">
        <DialogContent>
            <MudCard>
                <MudCardContent>
                    <MudItem xs="12">
                        <MudSelect T="PatientDto" Variant="Variant.Outlined" Required Label="Patient" @bind-Value="SelectedPatient">
                            @foreach (var patient in Patients)
                            {
                                <MudSelectItem Value=@patient>@patient.Name</MudSelectItem>
                            }
                        </MudSelect>

                        <MudSelect T="EmployeeDto" Variant="Variant.Outlined" Required Label="Employee" @bind-Value="SelectedEmployee">
                            @foreach (var employee in Employees)
                            {
                                <MudSelectItem Value=@employee>@employee.Name</MudSelectItem>
                            }
                        </MudSelect>

                        <MudDatePicker Label="Appointment Date" Variant="Variant.Outlined" @bind-Value="AppointmentCreate.AppointmentDate" />

                        <MudSelect T="TreatmentDto" Variant="Variant.Outlined" Required Label="Treatment" @bind-Value="SelectedTreatment">
                            @foreach (var treatment in Treatments)
                            {
                                <MudSelectItem Value=@treatment>@treatment.Name</MudSelectItem>
                            }
                        </MudSelect>

                        <MudSelect T="string" Variant="Variant.Outlined" Required Label="Status" @bind-Value="AppointmentCreate.Status">
                            <MudSelectItem Value="Scheduled">Scheduled</MudSelectItem>
                            <MudSelectItem Value="Completed">Completed</MudSelectItem>
                            <MudSelectItem Value="Cancelled">Cancelled</MudSelectItem>
                        </MudSelect>
                    </MudItem>
                </MudCardContent>
            </MudCard>
        </DialogContent>
        <DialogActions>
            <MudButton Color="Color.Tertiary" Variant="Variant.Filled" OnClick="() => Cancel()">Cancel</MudButton>
            <MudButton ButtonType="ButtonType.Submit" Disabled="@Disabled" Variant="Variant.Filled" Color="Color.Tertiary" OnClick="() => CreateOrUpdate()">Save</MudButton>
        </DialogActions>
    </MudDialog>
}
else
{
    <MudDialog Style="width:inherit">
        <DialogContent>
            <MudCard>
                <MudCardContent>
                    <MudItem xs="12">
                        <MudSelect T="PatientDto" Variant="Variant.Outlined" Required Label="Patient" @bind-Value="SelectedPatient">
                            @foreach (var patient in Patients)
                            {
                                <MudSelectItem Value=@patient>@patient.Name</MudSelectItem>
                            }
                        </MudSelect>

                        <MudSelect T="EmployeeDto" Variant="Variant.Outlined" Required Label="Employee" @bind-Value="SelectedEmployee">
                            @foreach (var employee in Employees)
                            {
                                <MudSelectItem Value=@employee>@employee.Name</MudSelectItem>
                            }
                        </MudSelect>

                        <MudDatePicker Label="Appointment Date" Variant="Variant.Outlined" @bind-Value="AppointmentUpdate.AppointmentDate" />

                        <MudSelect T="TreatmentDto" Variant="Variant.Outlined" Required Label="Treatment" @bind-Value="SelectedTreatment">
                            @foreach (var treatment in Treatments)
                            {
                                <MudSelectItem Value=@treatment>@treatment.Name</MudSelectItem>
                            }
                        </MudSelect>

                        <MudSelect T="string" Variant="Variant.Outlined" Required Label="Status" @bind-Value="AppointmentUpdate.Status">
                            <MudSelectItem Value="Scheduled">Scheduled</MudSelectItem>
                            <MudSelectItem Value="Completed">Completed</MudSelectItem>
                            <MudSelectItem Value="Cancelled">Cancelled</MudSelectItem>
                        </MudSelect>
                    </MudItem>
                </MudCardContent>
            </MudCard>
        </DialogContent>
        <DialogActions>
            <MudButton Color="Color.Tertiary" Variant="Variant.Filled" OnClick="() => Cancel()">Cancel</MudButton>
            <MudButton ButtonType="ButtonType.Submit" Disabled="@Disabled" Variant="Variant.Filled" Color="Color.Tertiary" OnClick="() => CreateOrUpdate()">Save</MudButton>
        </DialogActions>
    </MudDialog>
}
