@inherits LoginViewModel
@inject NavigationManager Navigation

<EditForm Model="Login" OnValidSubmit="ExecuteLogin" style="align-items:center; display:flex; flex-direction:column; margin-top:20px;">
    <DataAnnotationsValidator />
    <MudCard Style="width:90%;" Elevation="0">
        <MudCardHeader>
            <MudText Color="@Color.Primary" Typo="Typo.h4">Login</MudText>
        </MudCardHeader>
        <MudCardContent>
            <MudTextField Variant="Variant.Outlined" Label="E-Mail"
                          @bind-Value="Login.Email" />
            <ValidationMessage For="@(() => Login.Email)" />

            <MudTextField Variant="Variant.Outlined" Label="Password" Class="mt-3"
                          @bind-Value="Login.Password"
                          InputType="@PasswordInput" Adornment="Adornment.End"
                          AdornmentIcon="@PasswordInputIcon"
                          OnAdornmentClick="ShowHidePassword" AdornmentAriaLabel="Show Password" />
            <ValidationMessage For="@(() => Login.Password)" />

            @if (ShowAuthError)
            {
                <MudAlert Class="mt-2" Severity="Severity.Error">@Error</MudAlert>
            }

            <MudText Style="cursor:pointer" Class="mt-3" @onclick="OpenForgotPasswordPage" Typo="Typo.body2" Color="Color.Secondary">Forgot password?</MudText>
        </MudCardContent>
        <MudCardActions Style="display:flex; flex-direction:column">
            <MudButton ButtonType="ButtonType.Submit" Class="mb-2" Variant="Variant.Filled" Color="Color.Primary" FullWidth="true">Login</MudButton>
            <MudButton Variant="Variant.Outlined" Color="Color.Primary" Class="mt-3 w-100 mb-10" @onclick="Registration">Register</MudButton>
        </MudCardActions>
    </MudCard>
    @if (IsLoading)
    {
        <MudProgressCircular Indeterminate="true" Color="Color.Primary" />
    }
</EditForm>
